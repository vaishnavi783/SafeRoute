<!DOCTYPE html>
<html>
<head>
  <title>SafeRoute - AI Smart Navigation</title>

  <link rel="stylesheet"
        href="https://unpkg.com/leaflet/dist/leaflet.css"/>

  <style>
    html, body {
      margin: 0;
      padding: 20px;
      font-family: Arial;
      height: 100%;
    }

    #topBar {
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
   #safetyBox {
     margin-bottom:10px;
     padding:10px;
     border-radius:6px;
     background:#f2f2f2;
     font-weight:bold;
    }
    input, select, textarea {
      padding:8px;
      border-radius:6px;
      border:1px solid #ccc;
      width:100%;
      box-sizing:border-box;
    }

    button {
      padding:8px 12px;
      border:none;
      border-radius:6px;
      background:#2c7be5;
      color:white;
      cursor:pointer;
    }

    #sosBtn {
      background:red;
      font-weight:bold;
    }

    #map {
      height:70vh;
      width:100%;
      border-radius:8px;
    }

    #overlay {
      display:none;
      position:fixed;
      width:100%;
      height:100%;
      background:rgba(0,0,0,0.4);
      top:0;
      left:0;
      z-index:900;
    }

    #incidentForm {
      display:none;
      position:fixed;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      background:white;
      padding:20px;
      border-radius:8px;
      box-shadow:0 0 20px rgba(0,0,0,0.3);
      z-index:1000;
      width:320px;
    }

    #incidentForm textarea {
      resize:none;
    }

  </style>
</head>

<body>

<h2>SafeRoute - AI Smart Navigation</h2>

<div id="topBar">
  <input type="text" id="locationSearch" placeholder="Search destination">
  <button onclick="searchLocation()">Search</button>
  <button onclick="getSafeRoute()">ğŸ§­ Get Safe Route</button>
  <button onclick="toggleLiveTracking()">ğŸ“ Live</button>
  <button id="sosBtn" onclick="sendSOS()">ğŸš¨ SOS</button>
</div>
<div id="safetyBox">
  Safety Score: <span id="safetyScore">Calculating...</span>
</div>

<div id="map"></div>

<div id="overlay"></div>

<div id="incidentForm">
  <h3>Report Incident</h3>
  <select id="incidentCategory">
    <option value="Accident">ğŸš— Accident</option>
    <option value="Harassment">ğŸš¨ Harassment</option>
    <option value="Theft">ğŸ›‘ Theft</option>
    <option value="Road Hazard">âš  Road Hazard</option>
    <option value="Other">â“ Other</option>
  </select>
  <br><br>
  <textarea id="incidentDescription"
            rows="3"
            placeholder="Describe incident"></textarea>
  <br><br>
  <button onclick="submitIncident()">Submit</button>
  <button onclick="closeIncidentForm()" style="background:gray;">
    Cancel
  </button>
</div>

<audio id="alertSound"
src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg"
preload="auto"></audio>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-polylineencoded/Polyline.encoded.js"></script>

<script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore-compat.js"></script>

<script src="firebase-config.js"></script>
<script src="script.js"></script>

</body>
</html>
